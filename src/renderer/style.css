/* ==================== CSS Variables & Theme System ==================== */
/* Theme variables are now defined in separate theme files:
   - themes/classic.css: Classic White theme
   - themes/dark.css: Dark theme
   All CSS variables are theme-specific and loaded via data-theme attribute */

/* ==================== Reset & Base Styles ==================== */
* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

body {
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
    background: var(--bg-body);
    min-height: 100vh;
    padding: 8px;
    color: var(--text-primary);
    font-size: 13px;
}

/* ==================== Statistics (Inline in Header) ==================== */
.statistics-inline {
    flex: 1;
    /* Take available space between title and controls */
    display: flex;
    align-items: center;
    padding: 0 16px;
    font-size: 11px;
    user-select: none;
    overflow: hidden;
    /* Prevent breaking layout if too small */
    height: 28px;
    /* Match button height roughly */
}

/* Adjust stats bar for inline context */
.statistics-inline .stats-bar {
    display: flex;
    align-items: center;
    width: 100%;
    gap: 12px;
}

/* Hide divider if space is tight? Or keep it. */
.statistics-inline .stat-divider {
    background-color: #333;
    height: 12px;
}

.stats-bar {
    display: flex;
    align-items: center;
    width: 100%;
    gap: 16px;
    overflow: hidden;
}

.stat-item.compact {
    display: flex;
    align-items: center;
    gap: 6px;
    white-space: nowrap;
    color: #ced4da;
}

.stat-item.compact .stat-icon {
    font-size: 14px;
}

.stat-item.compact .stat-val {
    font-weight: 600;
    font-family: "JetBrains Mono", monospace;
}

.stat-divider {
    width: 1px;
    height: 16px;
    background-color: #495057;
    margin: 0 4px;
}

.stat-item.flex-grow {
    flex: 1;
    justify-content: flex-end;
}

/* Success/Failure Colors */
.stat-value--good {
    color: #40c057;
}

.stat-value--warning {
    color: #fab005;
}

/* ==================== Container ==================== */
.container {
    max-width: 100%;
    height: calc(100vh - 16px);
    display: flex;
    flex-direction: column;
    background: var(--bg-container);
    border-radius: 12px;
    box-shadow: var(--shadow-lg);
    overflow: hidden;
    position: relative;
    border: 1px solid var(--border-color);
}

.timestamp-tool-container {
    width: 100%;
    /* Max width removed for full responsiveness */
    /* max-width: 800px; */
    margin: 0;
    display: flex;
    flex-direction: column;
    gap: 20px;
    /* background: var(--bg-container); */
    /* border-radius: 12px; */
    /* box-shadow: var(--shadow-lg); */
    /* overflow: hidden; */
}

/* ==================== Header ==================== */
header {
    background: var(--primary-gradient);
    color: var(--text-on-primary);
    padding: 10px 20px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    gap: 16px;
}

.header-content h1 {
    font-size: 20px;
    font-weight: 700;
    margin-bottom: 2px;
    letter-spacing: -0.5px;
}

.theme-select {
    padding: 6px 12px;
    border-radius: 6px;
    border: 1px solid rgba(255, 255, 255, 0.2);
    background: rgba(255, 255, 255, 0.1);
    color: var(--text-on-primary);
    font-size: 13px;
    cursor: pointer;
    outline: none;
    transition: all 0.3s ease;
    backdrop-filter: blur(4px);
}

.theme-select:hover {
    background: rgba(255, 255, 255, 0.2);
    border-color: rgba(255, 255, 255, 0.4);
}

.theme-select option {
    background: var(--bg-card);
    /* Fallback color for options since glassmorphism fails there */
    color: var(--text-primary);
}

.subtitle {
    font-size: 13px;
    opacity: 0.95;
    font-weight: 300;
}

/* ==================== Main Layout ==================== */
main {
    display: flex;
    flex-direction: column;
    gap: 0;
    flex: 1;
    /* Allow main to fill remaining space */
    min-height: 0;
    /* Enable scrolling for flex children */
    overflow: hidden;
    /* Prevent main scrollbar */
}

.main-panel {
    display: none;
    flex: 1;
    flex-direction: column;
    height: 100%;
    /* Fill vertical space */
    width: 100%;
    /* Fill horizontal space */
    box-sizing: border-box;
    overflow: hidden;
    /* Default to hidden, specific panels override */
}

/* Panels that need scrolling */
#timestamp-panel,
#settings-panel {
    overflow-y: auto;
    padding: 20px;
}

/* Simulator Panel: Flex Layout for detached components */
#simulator-panel {
    display: none;
    /* Toggled via .active */
    flex-direction: column;
    overflow: hidden;
    /* Prevent body scroll */
    padding: 0;
    /* Remove padding from container */
    height: 100%;
}

#simulator-panel.active {
    display: flex;
}

#simulator-panel .config-section {
    flex: 1;
    /* Take remaining space */
    overflow-y: auto;
    /* Internal scrolling */
    padding: 20px;
    height: 100%;
    /* Ensure full height usage */
}

/* JSON Panel needs no padding and no outer scroll */
/* JSON Panel needs no padding and no outer scroll */
#json-panel {
    padding: 0;
    overflow: hidden;
}

/* .main-panel.active is handled by specific IDs or defaults */

/* ==================== Config Section ==================== */
.config-section {
    /* Padding is now handled by the #simulator-panel .config-section rule */
    /* padding: 12px 16px; */
    background-color: var(--bg-card);
    border-bottom: none;
    /* Removed as it's full height */
}

.config-panel h2 {
    color: var(--primary-color);
    font-size: 16px;
    font-weight: 600;
    margin-bottom: 12px;
    display: flex;
    align-items: center;
    gap: 8px;
}

/* ==================== Common Settings ==================== */
.common-settings {
    background: var(--bg-container);
    padding: 10px;
    border-radius: 8px;
    margin-bottom: 10px;
    box-shadow: var(--shadow-sm);
}

/* ==================== Form Grid ==================== */
.form-grid {
    display: grid;
    grid-template-columns: auto 1fr auto 1fr auto 1fr;
    gap: 6px 10px;
    align-items: center;
}

/* Make common settings less compact (1 pair per row) */
.common-settings .form-grid {
    grid-template-columns: 120px 1fr;
}

label {
    font-weight: 600;
    font-size: 12px;
    color: var(--text-secondary);
}

input,
select {
    padding: 6px 10px;
    border: 1px solid var(--border-color);
    border-radius: 6px;
    font-size: 12px;
    transition: all 0.3s ease;
    width: 100%;
    background: var(--bg-input);
    color: var(--text-primary);
}

input:focus,
select:focus {
    outline: none;
    border-color: var(--primary-color);
    box-shadow: 0 0 0 3px var(--focus-ring);
}

input::placeholder {
    color: #adb5bd;
}

/* ==================== Tabs (Unified with Navigation Style) ==================== */
.tabs {
    display: flex;
    gap: 12px;
    padding: 16px 20px;
    background: var(--primary-gradient);
    border-bottom: 2px solid rgba(255, 255, 255, 0.2);
    margin-bottom: 20px;
}

.tab-btn {
    flex: 1;
    padding: 12px 24px;
    border: 2px solid rgba(255, 255, 255, 0.3);
    background: rgba(255, 255, 255, 0.1);
    color: var(--text-on-primary);
    border-radius: 8px;
    cursor: pointer;
    font-size: 15px;
    font-weight: 600;
    transition: all 0.3s ease;
    backdrop-filter: blur(10px);
}

.tab-btn:hover {
    background: rgba(255, 255, 255, 0.2);
    border-color: rgba(255, 255, 255, 0.5);
    transform: translateY(-2px);
}

.tab-btn.active {
    background: var(--accent-gradient);
    color: var(--accent-text);
    border-color: var(--accent-color);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
}

/* ==================== Tab Content ==================== */
.tab-content {
    display: none;
    background: var(--bg-container);
    padding: 10px;
    border-radius: 8px;
    box-shadow: var(--shadow-sm);
    margin-bottom: 10px;
}

.tab-content.active {
    display: block;
    animation: fadeIn 0.3s ease;
}

/* Locked panel state */
.tab-content.locked {
    opacity: 0.6;
    pointer-events: none;
    position: relative;
}

.tab-content.locked::after {
    content: 'ðŸ”’ æ¨¡æ‹Ÿè¿è¡Œä¸­ï¼Œé…ç½®å·²é”å®š';
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    background: rgba(0, 0, 0, 0.8);
    color: #fff;
    padding: 20px 40px;
    border-radius: 8px;
    font-size: 16px;
    font-weight: bold;
    z-index: 1000;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
}

@keyframes fadeIn {
    from {
        opacity: 0;
        transform: translateY(-10px);
    }

    to {
        opacity: 1;
        transform: translateY(0);
    }
}

/* ==================== Advanced Mode ==================== */
.advanced-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 10px;
}

.advanced-header h3 {
    font-size: 16px;
    font-weight: 600;
    color: #495057;
    display: flex;
    align-items: center;
    gap: 8px;
}

.groups-container {
    display: flex;
    flex-direction: column;
    gap: 10px;
    max-height: 500px;
    overflow-y: auto;
    padding-right: 6px;
}

.groups-container::-webkit-scrollbar {
    width: 8px;
}

.groups-container::-webkit-scrollbar-track {
    background: #f1f3f5;
    border-radius: 4px;
}

.groups-container::-webkit-scrollbar-thumb {
    background: #adb5bd;
    border-radius: 4px;
}

.groups-container::-webkit-scrollbar-thumb:hover {
    background: #868e96;
}

.group-item {
    background: #f8f9fa;
    border: 1px solid #e9ecef;
    border-radius: 8px;
    padding: 12px;
    transition: all 0.3s ease;
}

.group-item:hover {
    border-color: var(--primary-color);
    box-shadow: var(--shadow-md);
}

.group-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 10px;
    padding-bottom: 8px;
    border-bottom: 1px solid #dee2e6;
}

.group-header span {
    font-weight: 600;
    font-size: 15px;
    color: #495057;
}

.group-form {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 12px 16px;
}

.group-form>div {
    display: flex;
    flex-direction: column;
    gap: 6px;
}

.group-form label {
    font-size: 12px;
    font-weight: 600;
    color: #6c757d;
}


.ratio-input {
    display: flex;
    flex-direction: column;
    gap: 6px;
}

.ratio-input label {
    font-size: 11px;
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

/* Group Custom Keys */
.group-custom-keys {
    margin-top: 16px;
    padding-top: 16px;
    border-top: 2px solid #dee2e6;
}

.group-custom-keys .section-header {
    margin-bottom: 12px;
}

.group-custom-keys .section-header h4 {
    font-size: 13px;
}

/* ==================== Buttons ==================== */
.controls {
    display: flex;
    gap: 12px;
    justify-content: center;
}

button {
    padding: 12px 28px;
    border: none;
    border-radius: 8px;
    cursor: pointer;
    font-size: 15px;
    font-weight: 600;
    transition: all 0.3s ease;
    display: inline-flex;
    align-items: center;
    gap: 8px;
}

.btn-primary {
    background: var(--accent-gradient);
    color: var(--accent-text);
    box-shadow: var(--shadow-md);
}

.btn-primary:hover {
    transform: translateY(-2px);
    box-shadow: var(--shadow-md);
}

.btn-primary:disabled {
    background: #ced4da;
    cursor: not-allowed;
    transform: none;
    box-shadow: none;
    opacity: 0.6;
}

.btn-danger {
    background: linear-gradient(135deg, #ff6b6b 0%, #fa5252 100%);
    color: white;
    box-shadow: 0 4px 12px rgba(255, 107, 107, 0.4);
}

.btn-danger:hover {
    transform: translateY(-2px);
    box-shadow: 0 6px 16px rgba(255, 107, 107, 0.5);
}

.btn-danger:disabled {
    background: #ced4da;
    cursor: not-allowed;
    transform: none;
    box-shadow: none;
    opacity: 0.6;
}

.btn-secondary {
    background: var(--primary-gradient);
    color: var(--text-on-primary);
    box-shadow: var(--shadow-md);
}

.btn-secondary:hover {
    transform: translateY(-2px);
    box-shadow: var(--shadow-md);
}

.btn-add {
    padding: 8px 16px;
    background: var(--primary-gradient);
    color: var(--text-on-primary);
    font-size: 13px;
    box-shadow: var(--shadow-md);
}

.btn-add:hover {
    transform: translateY(-1px);
    box-shadow: var(--shadow-md);
}

.btn-add:disabled {
    background: #ced4da;
    cursor: not-allowed;
    opacity: 0.6;
    transform: none;
}

.btn-clear {
    padding: 6px 14px;
    background: #868e96;
    color: white;
    font-size: 13px;
}

.btn-clear:hover {
    background: #495057;
}

.delete-group-btn {
    padding: 4px 12px;
    background: #ff6b6b;
    color: white;
    font-size: 12px;
    border-radius: 6px;
}

.delete-group-btn:hover {
    background: #fa5252;
}

/* Compact Clear Button */
.log-controls .btn-warning {
    padding: 0 10px;
    /* Reduced horizontal padding */
    font-size: 12px;
}

/* ==================== Log Section ==================== */
.log-section {
    padding: 10px 12px;
    background-color: #1a1a1a;
    transition: all 0.3s ease;
    flex: 0 0 auto;
    /* Don't grow or shrink */
    border-top: 1px solid #333;
    /* Visual separation */
    z-index: 50;
    /* Ensure above config scroll */
    box-shadow: 0 -4px 12px rgba(0, 0, 0, 0.2);
    /* Lift effect */
}

.log-section .log-header {
    cursor: pointer;
    user-select: none;
}

.log-section .log-header:hover h3 {
    color: var(--primary-color);
}

/* Toggle Icon in Log Controls */
.toggle-icon {
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 10px;
    width: 28px;
    height: 28px;
    color: #6c757d;
    transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    margin-left: 4px;
    /* Space from Clear button */
}

/* Rotate icon when NOT collapsed (panel is OPEN) */
.log-section:not(.collapsed) .toggle-icon {
    transform: rotate(180deg);
    /* Flip up for open state */
}

/* Original rotation was 90deg, but now we use up/down arrow */

/* Collapsed State: Zero height content, but keep header visible */
/* Collapsed State: Zero height content, but keep header visible */
.log-section.collapsed .log-container {
    height: 0;
    min-height: 0;
    /* Override base min-height */
    flex: 0 0 0;
    padding: 0;
    margin: 0;
    opacity: 0;
    border: none;
}

/* Hide controls smoothly or just hide them? Hiding them is better for clean header */
.log-section.collapsed .log-controls {
    opacity: 0;
    pointer-events: none;
    transition: opacity 0.2s ease;
}

.log-section:not(.collapsed) .log-controls {
    opacity: 1;
    transition: opacity 0.3s ease 0.1s;
    /* Slight delay */
}

/* Container Transitions */
/* Container Transitions */
.log-container {
    flex: 0 0 260px;
    /* Don't grow, fixed basis */
    background: #252525;
    border-radius: 6px;
    padding: 8px;
    overflow-y: auto;
    font-family: "JetBrains Mono", "SF Mono", "Consolas", "Courier New", monospace;
    font-size: 12px;
    line-height: 1.4;
    display: flex;
    flex-direction: column;
    gap: 2px;
    border: 1px solid #333;
    /* Full border */
    border-radius: 6px;
    /* Full radius */
    min-width: 0;

    /* Strict sizing: Lock height to 260px */
    min-height: 260px;
    /* Force minimum height */
    height: 260px !important;
    max-height: 260px;

    opacity: 1;
    transition: height 0.3s cubic-bezier(0.4, 0, 0.2, 1),
        flex 0.3s cubic-bezier(0.4, 0, 0.2, 1),
        opacity 0.2s ease,
        padding 0.3s ease,
        margin 0.3s ease;
}

.log-panel {
    display: flex;
    flex-direction: column;
    height: auto;
    width: 100%;
    /* Ensure children stretch */
}

/* Maximized State */
.log-section.maximized {
    position: fixed;
    top: 0;
    left: 0;
    width: 100vw;
    height: 100vh;
    z-index: 1000;
    margin: 0;
    border-radius: 0;
    padding: 16px 20px;
    background-color: #1a1a1a;
    /* Ensure background is solid */
}

.log-section.maximized .log-panel {
    height: calc(100vh - 60px) !important;
}

.log-section.maximized .log-container {
    height: 100% !important;
    min-height: 0 !important;
    /* Allow flex to control height */
    max-height: none !important;
    flex: 1 !important;
    /* Allow growing in maximized state */
}

/* Ensure controls have same height */
.log-controls {
    display: flex;
    gap: 6px;
    align-items: center;
    height: 30px;
    /* Explicit height */
}

/* Common style for all Log controls to ensure alignment */
.log-controls input,
.log-controls button {
    height: 28px !important;
    /* Force matching height */
    box-sizing: border-box;
    margin: 0;
}

.log-controls input {
    padding: 2px 8px;
    font-size: 12px;
}

.log-controls button {
    display: flex;
    align-items: center;
    justify-content: center;
}

/* Icon Buttons */
.btn-icon {
    background: rgba(255, 255, 255, 0.05);
    border: 1px solid rgba(255, 255, 255, 0.1);
    color: #ced4da;
    width: 28px;
    padding: 0;
    border-radius: 4px;
    cursor: pointer;
    font-size: 14px;
    transition: all 0.2s ease;
}

/* Log Container Fix */
.log-container {
    flex: 1;
    background: #252525;
    border-radius: 6px;
    padding: 8px;
    overflow-y: auto;
    font-family: "JetBrains Mono", "SF Mono", "Consolas", "Courier New", monospace;
    font-size: 12px;
    line-height: 1.4;
    display: flex;
    flex-direction: column;
    gap: 2px;
    border: 1px solid #333;
    min-width: 0;
    /* Prevent flex overflow */
}

.btn-icon:hover {
    background: rgba(255, 255, 255, 0.15);
    color: #fff;
    border-color: rgba(255, 255, 255, 0.3);
}

.btn-icon.active {
    background: rgba(74, 222, 128, 0.15);
    color: #4ade80;
    border-color: rgba(74, 222, 128, 0.4);
}

.log-controls {
    display: flex;
    gap: 6px;
    align-items: center;
}

.log-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    /* Fallback */
    margin-bottom: 10px;
    /* Reduced margin */
}

.log-header h3 {
    color: #f8f9fa;
    font-size: 16px;
    /* Slightly smaller header */
    font-weight: 600;
    display: flex;
    align-items: center;
    gap: 8px;
    margin: 0;
    /* Reset margin for better alignment */
    flex: 0 0 auto;
    /* Don't take extra space, let stats take it */
    white-space: nowrap;
}

.log-container {
    flex: 1;
    background: #252525;
    /* Slightly lighter than section bg for depth */
    border-radius: 6px;
    padding: 8px;
    /* Reduced padding */
    overflow-y: auto;
    font-family: "JetBrains Mono", "SF Mono", "Consolas", "Courier New", monospace;
    font-size: 12px;
    /* Smaller font */
    line-height: 1.4;
    /* Tighter lines */
    display: flex;
    flex-direction: column;
    gap: 2px;
    /* Minimal gap between entries */
    border: 1px solid #333;
}

.log-container::-webkit-scrollbar {
    width: 8px;
    /* Thinner scrollbar */
}

.log-container::-webkit-scrollbar-track {
    background: #1e1e1e;
    border-radius: 4px;
}

.log-container::-webkit-scrollbar-thumb {
    background: #444;
    border-radius: 4px;
}

.log-container::-webkit-scrollbar-thumb:hover {
    background: #555;
}

.log-entry {
    display: flex;
    gap: 8px;
    /* Reduced gap */
    padding: 1px 4px;
    /* Very distinct compact padding */
    border-radius: 3px;
}

.log-entry:hover {
    background-color: rgba(255, 255, 255, 0.05);
    /* Subtle hover effect */
}

.log-timestamp {
    color: #6c757d;
    /* Dimmer timestamp */
    font-size: 11px;
    min-width: 85px;
    font-variant-numeric: tabular-nums;
    /* Monospaced numbers */
    opacity: 0.8;
}

.log-message {
    flex: 1;
    word-wrap: break-word;
    color: #e9ecef;
}

/* Search highlight */
.log-message mark {
    background-color: rgba(255, 193, 7, 0.3);
    color: #fff;
    padding: 0 2px;
    border-radius: 2px;
    font-weight: normal;
    border: 1px solid rgba(255, 193, 7, 0.5);
}

/* Default log entry color */
.log-entry {
    color: #dee2e6;
    margin-bottom: 0;
    /* Remove bottom margin */
}

/* Refined Colors */
.log-entry.log-success {
    color: #69db7c;
    /* Open Color Green 4 */
}

.log-entry.log-error {
    color: #ff8787;
    /* Open Color Red 4 */
}

.log-entry.log-warning {
    color: #ffd43b;
    /* Open Color Yellow 4 */
}

.log-entry.log-info {
    color: #74c0fc;
    /* Open Color Blue 4 */
}

.log-data-wrapper {
    position: relative;
    margin-top: 2px;
    margin-left: 93px;
    /* Align with message start */
}

.log-data {
    color: #a5d6a7;
    font-family: 'Consolas', monospace;
    font-size: 11px;
    background-color: rgba(0, 0, 0, 0.2);
    padding: 6px;
    border-radius: 4px;
    white-space: pre-wrap;
    word-break: break-all;
    border-left: 2px solid var(--primary-color);
    line-height: 1.3;
}


.log-data.expanded {
    max-height: none;
    overflow-y: visible;
}

.stat-value-list {
    display: flex;
    flex-direction: column;
    gap: 4px;
    max-height: 100px;
    overflow-y: auto;
    width: 100%;
}

.stat-sub-item {
    display: flex;
    justify-content: space-between;
    font-size: 13px;
    color: #495057;
    padding: 2px 0;
    border-bottom: 1px dashed #e9ecef;
}

.stat-sub-item:last-child {
    border-bottom: none;
}

.stat-sub-label {
    font-weight: 500;
}

.stat-sub-value {
    font-family: "JetBrains Mono", monospace;
    font-weight: 600;
    color: #228be6;
}

/* Custom Scrollbar for stat list */
.stat-value-list::-webkit-scrollbar {
    width: 4px;
}

.stat-value-list::-webkit-scrollbar-track {
    background: #f1f3f5;
}

.stat-value-list::-webkit-scrollbar-thumb {
    background: #adb5bd;
    border-radius: 2px;
}

/* Custom scrollbar for log data */
.log-data::-webkit-scrollbar {
    width: 6px;
}

.log-data::-webkit-scrollbar-track {
    background: rgba(255, 255, 255, 0.05);
}

.log-data::-webkit-scrollbar-thumb {
    background: rgba(255, 255, 255, 0.2);
    border-radius: 3px;
}

.log-data::-webkit-scrollbar-thumb:hover {
    background: rgba(255, 255, 255, 0.3);
}

/* Action buttons container */
.log-actions {
    position: absolute;
    top: 5px;
    right: 5px;
    display: flex;
    gap: 5px;
    opacity: 0;
    transition: opacity 0.2s;
    background: rgba(0, 0, 0, 0.5);
    padding: 2px;
    border-radius: 4px;
}

.log-data-wrapper:hover .log-actions {
    opacity: 1;
}

.group-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 16px;
    padding: 12px 16px;
    background: var(--accent-gradient);
    color: var(--accent-text);
    border-radius: 8px;
    font-weight: 600;
    cursor: pointer;
    user-select: none;
    transition: all 0.2s ease;
}

.group-header:hover {
    transform: translateY(-1px);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
}

.group-toggle-icon {
    font-size: 12px;
    transition: transform 0.3s ease;
    margin-right: 8px;
    display: inline-block;
}

.group-toggle-icon.rotated {
    transform: rotate(-90deg);
}

.group-title {
    flex: 1;
}

.group-header .delete-group-btn {
    background: rgba(0, 0, 0, 0.2);
    color: white;
    border: 1px solid rgba(255, 255, 255, 0.3);
    padding: 6px 12px;
    border-radius: 6px;
    cursor: pointer;
    font-size: 12px;
    transition: all 0.2s ease;
}

.group-header .delete-group-btn:hover {
    background: rgba(0, 0, 0, 0.4);
    border-color: rgba(255, 255, 255, 0.5);
}

/* Collapsible group form */
.group-form {
    max-height: 2000px;
    overflow: hidden;
    transition: max-height 0.4s cubic-bezier(0.4, 0, 0.2, 1), opacity 0.3s ease;
    opacity: 1;
}

.group-form.collapsed {
    max-height: 0;
    opacity: 0;
}

.log-btn {
    background: rgba(255, 255, 255, 0.1);
    border: 1px solid rgba(255, 255, 255, 0.2);
    color: #fff;
    border-radius: 3px;
    padding: 2px 6px;
    font-size: 11px;
    cursor: pointer;
    transition: all 0.2s;
}

.log-btn:hover {
    background: rgba(255, 255, 255, 0.3);
    border-color: rgba(255, 255, 255, 0.4);
}

/* ==================== Custom Keys Section ==================== */
.custom-keys-section {
    margin-top: 20px;
    padding-top: 20px;
    border-top: 2px solid #e9ecef;
}

.section-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 12px;
}

.section-header h4 {
    font-size: 14px;
    font-weight: 600;
    color: #495057;
    margin: 0;
}

.log-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 12px;
    gap: 16px;
}

.log-header h3 {
    font-size: 16px;
    font-weight: 600;
    color: #495057;
    margin: 0;
    white-space: nowrap;
}

.log-controls {
    display: flex;
    gap: 12px;
    align-items: center;
    flex: 1;
}

.log-search-input {
    flex: 1;
    padding: 8px 12px;
    border: 2px solid #dee2e6;
    border-radius: 6px;
    font-size: 13px;
    transition: all 0.3s ease;
    max-width: 400px;
}

.log-search-input:focus {
    outline: none;
    border-color: var(--primary-color);
    box-shadow: 0 0 0 3px var(--focus-ring);
}

.log-search-input::placeholder {
    color: #adb5bd;
}

.btn-add-small {
    padding: 4px 12px;
    background: var(--primary-gradient);
    color: var(--text-on-primary);
    font-size: 12px;
    border: none;
    border-radius: 6px;
    cursor: pointer;
}

.btn-add-small:hover {
    transform: translateY(-1px);
    box-shadow: var(--shadow-md);
}

.btn-add-small:disabled {
    background: #e9ecef;
    color: #adb5bd;
    cursor: not-allowed;
    transform: none;
    box-shadow: none;
    border-color: #dee2e6;
}

.custom-keys-container {
    display: flex;
    flex-direction: column;
    gap: 8px;
}

.custom-key-item {
    display: flex;
    gap: 12px;
    align-items: flex-end;
    padding: 12px;
    background: #f8f9fa;
    border-radius: 8px;
    margin-bottom: 8px;
}

.custom-key-item>div:nth-child(1) {
    flex: 2;
}

.custom-key-item>div:nth-child(2) {
    flex: 1;
}

.custom-key-item>div:nth-child(3),
.custom-key-item>div:nth-child(4) {
    flex: 1;
}

.min-max-container {
    display: flex;
    gap: 8px;
}

.min-max-container input {
    flex: 1;
}

.custom-key-item>div {
    display: flex;
    flex-direction: column;
    gap: 4px;
}

.custom-key-item input,
.custom-key-item select {
    padding: 6px 8px;
    font-size: 13px;
    width: 100%;
}

.custom-key-item label {
    font-size: 12px;
    font-weight: 600;
    color: #495057;
}

/* Range input containers for min/max fields */
.range-input {
    display: flex;
    flex-direction: column;
    gap: 4px;
}

.btn-remove-key {
    flex: 0 0 auto;
    height: 32px;
    margin-bottom: 1px;
    background: #f03e3e;
    color: white;
    border: none;
    border-radius: 6px;
    cursor: pointer;
    font-size: 13px;
    transition: background 0.2s;
    padding: 0 16px;
}

.btn-remove-key:hover {
    background: #fa5252;
}

.delete-key-btn {
    background: #f03e3e;
    color: white;
    padding: 8px 16px;
    border: none;
    border-radius: 6px;
    cursor: pointer;
    font-size: 13px;
    transition: background 0.2s;
}

.delete-key-btn:hover {
    background: #fa5252;
}

/* ==================== Main Navigation ==================== */
.main-nav {
    display: flex;
    gap: 12px;
    padding: 16px 20px;
    background: var(--primary-gradient);
    border-bottom: 2px solid rgba(255, 255, 255, 0.2);
}

.nav-btn {
    flex: 1;
    padding: 12px 24px;
    border: 2px solid rgba(255, 255, 255, 0.3);
    background: rgba(255, 255, 255, 0.1);
    color: var(--text-on-primary);
    border-radius: 8px;
    cursor: pointer;
    font-size: 15px;
    font-weight: 600;
    transition: all 0.3s ease;
    backdrop-filter: blur(10px);
}

.nav-btn:hover {
    background: rgba(255, 255, 255, 0.2);
    border-color: rgba(255, 255, 255, 0.5);
    transform: translateY(-2px);
}

.nav-btn.active {
    background: var(--accent-gradient);
    color: var(--accent-text);
    border-color: var(--accent-color);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
}

/* ==================== Main Panels ==================== */
.main-panel {
    display: none;
}

.main-panel.active {
    display: block;
}



/* ==================== Tool Section ==================== */
.tool-section {
    background: var(--bg-container);
    border-radius: 12px;
    padding: 20px;
    margin-bottom: 20px;
    box-shadow: var(--shadow-md);
    transition: all 0.3s ease;
}

.tool-section:hover {
    box-shadow: 0 6px 20px rgba(0, 0, 0, 0.15);
    transform: translateY(-2px);
}

.tool-section h2 {
    color: var(--primary-color);
    font-size: 18px;
    font-weight: 600;
    margin-bottom: 20px;
    display: flex;
    align-items: center;
    gap: 8px;
    padding-bottom: 12px;
    border-bottom: 2px solid #f1f3f5;
}

/* ==================== Current Time Display - Compact ==================== */
.current-time-compact {
    display: flex;
    justify-content: space-between;
    /* å·¦å³åˆ†å¸ƒ */
    align-items: center;
    padding: 12px 16px;
    background: var(--bg-card);
    border-radius: 8px;
    border: 1px solid var(--border-color);
}

.time-item {
    display: flex;
    align-items: center;
    gap: 8px;
}

.time-item-right {
    margin-left: auto;
    /* ç¡®ä¿é å³ */
}

.time-label {
    font-size: 13px;
    font-weight: 600;
    color: var(--primary-color);
}

.time-value {
    font-size: 15px;
    font-weight: 700;
    color: var(--text-secondary);
}

.timestamp-val.result-text {
    font-family: "JetBrains Mono", "Fira Code", monospace;
    font-size: 13px;
    font-weight: 600;
    color: var(--accent-color);
    padding: 6px 10px;
    background: var(--bg-hover);
    border-radius: 4px;
    user-select: all;
    flex: 1;
}

.timestamp-value {
    font-family: "JetBrains Mono", "Fira Code", "Courier New", monospace;
    font-size: 14px;
    color: var(--primary-color);
}

.btn-copy-small {
    padding: 4px 8px;
    background: var(--primary-gradient);
    color: var(--text-on-primary);
    border: none;
    border-radius: 4px;
    font-size: 12px;
    cursor: pointer;
    transition: all 0.2s ease;
    margin-left: 4px;
}

.btn-copy-small:hover {
    transform: translateY(-1px);
    box-shadow: var(--shadow-md);
}

.btn-copy-small.copied {
    background: linear-gradient(135deg, #51cf66 0%, #37b24d 100%);
}


/* ==================== Converter Form ==================== */
.converter-form {
    display: flex;
    flex-direction: row;
    flex-wrap: nowrap;
    /* ç¦æ­¢æ¢è¡Œ */
    gap: 12px;
    align-items: center;
    overflow-x: auto;
    /* å¦‚æžœå†…å®¹è¿‡å®½ï¼Œå…è®¸æ°´å¹³æ»šåŠ¨è€Œä¸æ˜¯æ¢è¡Œ */
}

.form-row {
    display: flex;
    align-items: center;
    gap: 8px;
    flex: 0 0 auto;
    white-space: nowrap;
    /* é˜²æ­¢å†…éƒ¨å…ƒç´ æ¢è¡Œ */
}

.form-row label {
    font-weight: 600;
    font-size: 13px;
    color: #495057;
    white-space: nowrap;
    flex-shrink: 0;
    /* æ ‡ç­¾ä¸æ”¶ç¼© */
}

.form-row input[type="text"],
.form-row input[type="date"],
.form-row input[type="time"],
.form-row input[type="datetime-local"] {
    padding: 8px 12px;
    border: 2px solid #e0e0e0;
    border-radius: 8px;
    font-size: 13px;
    transition: all 0.3s ease;
    width: 240px;
    /* å›ºå®šå®½åº¦ */
    flex-shrink: 0;
    /* ä¸æ”¶ç¼© */
}

.form-row select {
    padding: 8px 12px;
    border: 2px solid #e0e0e0;
    border-radius: 8px;
    font-size: 13px;
    transition: all 0.3s ease;
    width: 160px;
    /* å‡å°å®½åº¦ */
    flex-shrink: 0;
}

.form-row input:focus,
.form-row select:focus {
    border-color: var(--primary-color);
    box-shadow: 0 0 0 3px var(--focus-ring);
    outline: none;
}

/* ==================== Result Display ==================== */
.result-row {
    background: transparent;
    padding: 0;
    border-radius: 0;
    margin: 0;
    flex: 0 0 auto;
    /* ä¸è‡ªåŠ¨å¢žé•¿ */
    min-width: auto;
    /* ç§»é™¤æœ€å°å®½åº¦é™åˆ¶ */
}

.result-display {
    display: flex;
    align-items: center;
    gap: 8px;
}

.result-text {
    flex: 0 1 auto;
    /* å…è®¸æ”¶ç¼©ä½†ä¸è‡ªåŠ¨å¢žé•¿ */
    font-size: 13px;
    /* å‡å°å­—å· */
    font-weight: 600;
    color: #228be6;
    font-family: "JetBrains Mono", "Fira Code", "Courier New", monospace;
    padding: 8px 10px;
    background: #f8f9fa;
    border: 2px solid #e0e0e0;
    border-radius: 8px;
    word-break: break-all;
    min-height: 36px;
    /* å‡å°é«˜åº¦ */
    display: flex;
    align-items: center;
    min-width: 180px;
    /* å‡å°æœ€å°å®½åº¦ */
    max-width: 250px;
    /* æ·»åŠ æœ€å¤§å®½åº¦ */
}

.result-text.error {
    color: #ff6b6b;
    border-color: #ff6b6b;
    background: #fff5f5;
}

/* ==================== Copy Button ==================== */
.btn-copy {
    padding: 8px 16px;
    background: var(--primary-gradient);
    color: var(--text-on-primary);
    border: none;
    border-radius: 6px;
    font-size: 12px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s ease;
    white-space: nowrap;
    box-shadow: var(--shadow-md);
    flex-shrink: 0;
}

.btn-copy:hover {
    transform: translateY(-2px);
    box-shadow: var(--shadow-md);
}

.btn-copy.copied {
    background: linear-gradient(135deg, #51cf66 0%, #37b24d 100%);
}

/* ==================== Responsive Design ==================== */
@media (max-width: 768px) {
    .current-time-display {
        grid-template-columns: 1fr;
    }

    .converter-form {
        flex-direction: column;
    }

    .form-row {
        width: 100%;
    }

    .form-row input[type="text"],
    .form-row input[type="date"],
    .form-row input[type="time"],
    .form-row input[type="datetime-local"],
    .form-row select {
        width: 100%;
    }

    .result-row {
        width: 100%;
    }

    .main-nav {
        flex-direction: column;
        gap: 8px;
    }
}

/* ==================== JSON Formatter Panel (Premium Style) ==================== */
.json-tool-section {
    display: flex;
    flex-direction: column;
    height: 100%;
    width: 100%;
    background: var(--bg-card);
    /* Remove borders/margins for full-screen feel */
    border: none;
    border-radius: 0;
    margin: 0;
    box-shadow: none;
    overflow: hidden;
}

/* ==================== Timestamp Tool Responsiveness ==================== */
/* Using Flexbox for maximum compatibility and fluidity */
.tool-section .form-grid {
    display: flex;
    flex-wrap: nowrap;
    /* Force single line on wide screens */
    align-items: center;
    gap: 12px;
    width: 100%;
}

.tool-section .form-grid label {
    flex-shrink: 0;
    /* Never shrink labels */
    white-space: nowrap;
    color: var(--text-secondary);
    font-weight: 500;
}

/* Inputs and Results share the available space */
.tool-section .form-grid input,
.tool-section .form-grid select,
.tool-section .form-grid .result-display {
    flex: 1;
    /* Grow to fill space */
    width: auto !important;
    /* Allow flex to control width */
    min-width: 120px;
    /* Prevent collapse */
    max-width: none !important;
}

/* Give input slightly more weight */
.tool-section .form-grid input {
    flex: 1.5;
}

/* Result text inside the result display */
.tool-section .form-grid .result-display {
    display: flex;
    align-items: center;
    gap: 8px;
}

.tool-section .form-grid .result-display .result-text {
    flex: 1;
    width: 100%;
    min-width: 50px;
}

/* Responsive Wrap for smaller screens */
@media (max-width: 1280px) {
    .tool-section .form-grid {
        flex-wrap: wrap;
        /* Allow wrapping */
    }

    /* When wrapped, expand items to fill lines */
    .tool-section .form-grid input,
    .tool-section .form-grid select,
    .tool-section .form-grid .result-display {
        flex: 1 0 200px;
        /* Grow, don't shrink below 200px */
    }
}

@media (max-width: 768px) {
    .tool-section .form-grid {
        flex-direction: column;
        /* Stack vertically on mobile */
        align-items: stretch;
    }

    .tool-section .form-grid label {
        margin-top: 8px;
        align-self: flex-start;
    }

    .tool-section .form-grid input,
    .tool-section .form-grid select,
    .tool-section .form-grid .result-display {
        width: 100% !important;
        flex: none;
    }
}

.result-display.full-width .result-text {
    flex: 1;
    width: 100%;
}

.json-tool-section:hover {
    box-shadow: var(--shadow-md);
    border-color: rgba(255, 255, 255, 0.1);
}

/* Toolbar styles removed as they are now integrated into panes */

/* Split View Layout */
.json-editor-container.split-view {
    display: flex;
    flex: 1;
    /* Grow to fill remaining space */
    height: 100%;
    /* Explicit height */
    width: 100%;
    flex-direction: row;
    position: relative;
    background: var(--bg-body);
    /* Slightly darker than card */
    overflow: hidden;
}

.json-pane {
    flex: 1;
    display: flex;
    flex-direction: column;
    height: 100%;
    /* Force pane to full height */
    min-width: 0;
    overflow: hidden;
    position: relative;
    /* For absolute children if needed */
}

/* Specific styling for Panes */
.json-pane.input-pane {
    border-right: 1px solid var(--border-color);
    background: var(--bg-body);
}

.json-pane.tree-pane {
    background: var(--bg-card);
}

/* Custom Scrollbar for Panes */
.json-pane ::-webkit-scrollbar {
    width: 10px;
    height: 10px;
}

.json-pane ::-webkit-scrollbar-track {
    background: transparent;
}

.json-pane ::-webkit-scrollbar-thumb {
    background: rgba(255, 255, 255, 0.1);
    border-radius: 5px;
    border: 2px solid transparent;
    background-clip: content-box;
}

.json-pane ::-webkit-scrollbar-thumb:hover {
    background-color: rgba(255, 255, 255, 0.2);
}

.json-textarea {
    flex: 1;
    /* Fills remaining space below header */
    width: 100%;
    height: 100%;
    /* Force height */
    background: transparent;
    border: none;
    resize: none;
    /* Disable manual resize handle */
    padding: 12px;
    font-family: "JetBrains Mono", "Fira Code", monospace;
    font-size: 13px;
    color: var(--json-text-color);
    line-height: 1.5;
    outline: none;
    white-space: pre;
    overflow: auto;
    caret-color: var(--accent-color, #60a5fa);
}

.json-textarea::placeholder {
    color: rgba(255, 255, 255, 0.15);
    font-style: italic;
}

/* Tree View Styling (IDE Style) */
.json-tree-view {
    flex: 1;
    overflow: auto;
    padding: 16px;
    font-family: 'Fira Code', 'Menlo', 'Monaco', 'Courier New', monospace;
    font-size: 13px;
    line-height: 1.6;
    color: #d4d4d4;
    background: transparent;
}

/* Search Controls (Removed from main bar, specific styles below) */

/* Pane Header */
.pane-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    background: var(--bg-header);
    border-bottom: 1px solid var(--border-color);
    padding: 6px 12px;
    height: 40px;
    flex-shrink: 0;
}

.pane-title {
    font-size: 11px;
    font-weight: 600;
    color: var(--text-secondary);
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

.pane-toolbar {
    display: flex;
    align-items: center;
    gap: 6px;
}

/* Mini Search Box */
.search-box-mini {
    display: flex;
    align-items: center;
    background: var(--bg-input-mini, rgba(0, 0, 0, 0.2));
    border: 1px solid var(--border-input-mini, rgba(255, 255, 255, 0.1));
    border-radius: 4px;
    padding: 2px 6px;
    width: 140px;
    transition: all 0.2s;
}

.search-box-mini:focus-within {
    border-color: var(--primary-color);
    width: 160px;
}

.search-box-mini input {
    border: none;
    background: transparent;
    padding: 2px;
    font-size: 11px;
    width: 100%;
    color: var(--text-primary);
    outline: none;
    box-shadow: none;
    height: auto;
    /* Reset global input height */
}

.btn-icon-sm {
    background: transparent;
    border: 1px solid transparent;
    color: var(--text-secondary);
    border-radius: 4px;
    cursor: pointer;
    padding: 4px;
    font-size: 14px;
    line-height: 1;
    transition: all 0.2s;
    display: flex;
    /* alignment */
    align-items: center;
    justify-content: center;
    width: 24px;
    height: 24px;
}

.btn-icon-sm:hover {
    background: var(--bg-hover);
    color: var(--text-primary);
}

.separator {
    width: 1px;
    height: 16px;
    background: var(--border-color);
    margin: 0 4px;
}

/* Adjust Tree View container for header */
.json-pane.tree-pane {
    background: var(--bg-body);
}

/* Tree View Lines & Hover */
details>div {
    margin-left: 6px;
    padding-left: 12px;
    border-left: 1px solid var(--tree-guide-line, rgba(255, 255, 255, 0.08));
    /* Tree Guide Line */
    position: relative;
}

details>div:hover {
    border-left-color: var(--text-secondary);
    /* Highlight line on hover */
}

/* Search Highlight */
.search-match {
    background-color: var(--search-match-bg, rgba(255, 165, 0, 0.4));
    /* Orange dim */
    border-radius: 2px;
    color: #fff;
    padding: 0 1px;
}

.search-match.current {
    background-color: var(--search-match-current-bg, #f59e0b);
    /* Bright Orange */
    color: #000;
    padding: 0 2px;
    font-weight: bold;
    box-shadow: 0 0 0 1px #fff;
}

/* Tree Row Alignment */
.tree-row {
    display: inline-block;
    /* Changed from block to let details indent work properly? No, block is better usually for row hover. Let's stick to inline styling context or flex. */
    /* details summary is block by default. content inside is inline */
    padding: 1px 0;
}

/* Adjust scrollbar z-index */
.json-pane ::-webkit-scrollbar {
    z-index: 10;
}

.placeholder-text {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    height: 100%;
    color: var(--text-muted);
    font-style: italic;
    opacity: 0.6;
}

/* Tree Structure */
.tree-row {
    position: relative;
    cursor: default;
    border-radius: 4px;
    padding: 1px 4px;
    transition: background 0.1s;
}

.tree-row:hover {
    background-color: var(--bg-hover);
}

/* Collapsible Details */
details {
    position: relative;
}

summary {
    cursor: pointer;
    outline: none;
    list-style: none;
    padding: 1px 4px;
    border-radius: 4px;
    user-select: none;
}

summary:hover {
    background-color: var(--bg-hover);
}

summary::-webkit-details-marker {
    display: none;
}

/* Arrow Icon */
summary::before {
    content: 'â–¸';
    display: inline-block;
    width: 14px;
    text-align: center;
    font-size: 12px;
    color: var(--text-secondary);
    transition: transform 0.15s ease;
    margin-right: 2px;
}

details[open]>summary::before {
    transform: rotate(90deg);
    color: var(--text-primary);
}

/* Indentation Guide (Optional visual cue) */
details>div {
    margin-left: 8px;
    /* Indent content */
    border-left: 1px solid var(--tree-guide-line, rgba(255, 255, 255, 0.05));
    /* Guide line */
    padding-left: 10px;
}

/* Syntax Highlighting (VS Code Dark Theme) */
.jv-key {
    color: var(--jv-key, #9cdcfe);
    font-weight: normal;
}

/* Property Key */
.jv-string {
    color: var(--jv-string, #ce9178);
}

/* String value */
.jv-number {
    color: var(--jv-number, #b5cea8);
}

/* Number */
.jv-boolean {
    color: var(--jv-boolean, #569cd6);
}

/* Boolean */
.jv-null {
    color: var(--jv-null, #569cd6);
    font-style: italic;
}

/* Null */
.jv-punctuation {
    color: var(--jv-punctuation, #858585);
}

/* Brackets, colons */

/* Size Hint */
.jv-size-hint {
    color: var(--text-muted);
    font-size: 11px;
    margin-left: 8px;
    font-style: italic;
}

/* Status Bar */
.status-bar {
    flex-shrink: 0;
    padding: 8px 16px;
    background: var(--bg-header);
    border-top: 1px solid var(--border-color);
    font-size: 12px;
    color: var(--text-secondary);
    display: flex;
    justify-content: space-between;
    align-items: center;
    font-family: 'Fira Code', monospace;
    transition: all 0.3s;
}

.status-left {
    display: flex;
    align-items: center;
    gap: 8px;
}

.status-bar.success {
    background: rgba(16, 185, 129, 0.1);
    color: #34d399;
    border-top-color: rgba(16, 185, 129, 0.2);
}

.status-bar.error {
    background: rgba(239, 68, 68, 0.1);
    color: #f87171;
    border-top-color: rgba(239, 68, 68, 0.2);
}